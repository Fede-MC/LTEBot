<!DOCTYPE html>
<html>
<head>
  <title>Bot Loader</title>
</head>
<body>
  <script>
    // Este script se ejecuta dentro del iframe y su única misión
    // es inyectar el script principal en la página de Moodle.
    try {
      const parentDoc = window.parent.document;
      if (!parentDoc.getElementById('chatbot-loader-script')) {
        const s = parentDoc.createElement('script');
        s.id = 'chatbot-loader-script';
        s.src = 'https://fede-mc.github.io/LTEBot/loader.js';
        parentDoc.body.appendChild(s);
      }
    } catch (e) {
      console.error('Error al cargar el chatbot. Es posible que las políticas de seguridad de Moodle lo estén bloqueando.', e);
    }
  </script>
</body>
</html>
